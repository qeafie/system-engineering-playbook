<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" 
     width="1400" height="1200" viewBox="0 0 1400 1200">
  
  <!-- Стили -->
  <defs>
    <style>
      .pool { fill: #E3F2FD; stroke: #1976D2; stroke-width: 2; }
      .pool-label { font-family: Arial; font-size: 14px; font-weight: bold; fill: #1976D2; }
      .task { fill: #FFF; stroke: #000; stroke-width: 1.5; rx: 10; ry: 10; }
      .task-text { font-family: Arial; font-size: 11px; fill: #000; text-anchor: middle; }
      .gateway { fill: #FFFFCC; stroke: #000; stroke-width: 1.5; }
      .gateway-text { font-family: Arial; font-size: 10px; fill: #000; text-anchor: middle; }
      .event-start { fill: #FFF; stroke: #000; stroke-width: 1; }
      .event-end { fill: #000; stroke: #000; stroke-width: 3; }
      .sequence-flow { fill: none; stroke: #000; stroke-width: 1.5; marker-end: url(#arrowhead); }
      .message-flow { fill: none; stroke: #000; stroke-width: 1.5; stroke-dasharray: 5,5; marker-end: url(#arrowhead-white); }
    </style>
    
    <!-- Стрелки для потоков -->
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#000" />
    </marker>
    <marker id="arrowhead-white" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#FFF" stroke="#000" stroke-width="1"/>
    </marker>
  </defs>
  
  <!-- Заголовок -->
  <text x="700" y="30" style="font-family: Arial; font-size: 18px; font-weight: bold; text-anchor: middle;">
    BPMN: Полный процесс проведения AI-интервью
  </text>
  
  <!-- Пул 1: Кандидат -->
  <rect class="pool" x="50" y="60" width="1300" height="280"/>
  <text class="pool-label" x="60" y="85" transform="rotate(-90 60 85)">Кандидат</text>
  
  <!-- События и задачи кандидата -->
  <circle class="event-start" cx="120" cy="200" r="18"/>
  <text class="task-text" x="120" y="245" style="font-size: 10px;">Начало</text>
  
  <rect class="task" x="180" y="170" width="120" height="60"/>
  <text class="task-text" x="240" y="200">Получить ссылку-</text>
  <text class="task-text" x="240" y="215">приглашение</text>
  
  <rect class="task" x="340" y="170" width="120" height="60"/>
  <text class="task-text" x="400" y="200">Перейти</text>
  <text class="task-text" x="400" y="215">по ссылке</text>
  
  <rect class="task" x="500" y="170" width="120" height="60"/>
  <text class="task-text" x="560" y="200">Прочитать</text>
  <text class="task-text" x="560" y="215">согласие на ПДн</text>
  
  <!-- Шлюз: Согласие? -->
  <g transform="translate(680, 200) rotate(45)">
    <rect class="gateway" x="-25" y="-25" width="50" height="50"/>
  </g>
  <text class="gateway-text" x="680" y="255">Согласие?</text>
  
  <rect class="task" x="750" y="170" width="120" height="60"/>
  <text class="task-text" x="810" y="200">Подписать</text>
  <text class="task-text" x="810" y="215">ЭЦП</text>
  
  <rect class="task" x="910" y="170" width="120" height="60"/>
  <text class="task-text" x="970" y="200">Настроить</text>
  <text class="task-text" x="970" y="215">камеру/микрофон</text>
  
  <rect class="task" x="1070" y="170" width="120" height="60"/>
  <text class="task-text" x="1130" y="200">Ответить</text>
  <text class="task-text" x="1130" y="215">на вопросы</text>
  
  <circle class="event-end" cx="1250" cy="200" r="18"/>
  <circle class="event-end" cx="1250" cy="200" r="14" fill="#FFF"/>
  <text class="task-text" x="1250" y="245" style="font-size: 10px;">Конец</text>
  
  <!-- Потоки кандидата -->
  <line class="sequence-flow" x1="138" y1="200" x2="180" y2="200"/>
  <line class="sequence-flow" x1="300" y1="200" x2="340" y2="200"/>
  <line class="sequence-flow" x1="460" y1="200" x2="500" y2="200"/>
  <line class="sequence-flow" x1="620" y1="200" x2="658" y2="200"/>
  <line class="sequence-flow" x1="702" y1="200" x2="750" y2="200"/>
  <line class="sequence-flow" x1="870" y1="200" x2="910" y2="200"/>
  <line class="sequence-flow" x1="1030" y1="200" x2="1070" y2="200"/>
  <line class="sequence-flow" x1="1190" y1="200" x2="1232" y2="200"/>
  
  <!-- Отказ (от gateway вниз) -->
  <line class="sequence-flow" x1="680" y1="222" x2="680" y2="280"/>
  <circle class="event-end" cx="680" cy="300" r="18"/>
  <circle class="event-end" cx="680" cy="300" r="14" fill="#FFF"/>
  <text class="task-text" x="680" y="330" style="font-size: 10px;">Отказ</text>
  
  <!-- Пул 2: AI-система -->
  <rect class="pool" x="50" y="360" width="1300" height="420"/>
  <text class="pool-label" x="60" y="385" transform="rotate(-90 60 385)">AI-система</text>
  
  <!-- События и задачи AI-системы -->
  <circle class="event-start" cx="120" cy="570" r="18"/>
  <text class="task-text" x="120" y="615" style="font-size: 10px;">Начало</text>
  
  <rect class="task" x="180" y="540" width="120" height="60"/>
  <text class="task-text" x="240" y="565">Сгенерировать</text>
  <text class="task-text" x="240" y="580">уникальную ссылку</text>
  
  <rect class="task" x="340" y="540" width="120" height="60"/>
  <text class="task-text" x="400" y="565">Отправить</text>
  <text class="task-text" x="400" y="580">приглашение</text>
  
  <rect class="task" x="500" y="540" width="120" height="60"/>
  <text class="task-text" x="560" y="565">Показать форму</text>
  <text class="task-text" x="560" y="580">согласия</text>
  
  <rect class="task" x="750" y="540" width="120" height="60"/>
  <text class="task-text" x="810" y="565">Валидировать</text>
  <text class="task-text" x="810" y="580">ЭЦП</text>
  
  <rect class="task" x="340" y="650" width="120" height="60"/>
  <text class="task-text" x="400" y="675">Загрузить</text>
  <text class="task-text" x="400" y="690">3D-аватар</text>
  
  <rect class="task" x="500" y="650" width="120" height="60"/>
  <text class="task-text" x="560" y="675">Инициализировать</text>
  <text class="task-text" x="560" y="690">WebRTC</text>
  
  <rect class="task" x="680" y="650" width="120" height="60"/>
  <text class="task-text" x="740" y="675">Сформировать</text>
  <text class="task-text" x="740" y="690">вопрос</text>
  
  <!-- Параллельный шлюз (анализ) -->
  <g transform="translate(880, 680) rotate(45)">
    <rect class="gateway" x="-25" y="-25" width="50" height="50"/>
    <line x1="-10" y1="0" x2="10" y2="0" stroke="#000" stroke-width="2"/>
    <line x1="0" y1="-10" x2="0" y2="10" stroke="#000" stroke-width="2"/>
  </g>
  <text class="gateway-text" x="880" y="735">Анализ</text>
  
  <rect class="task" x="940" y="410" width="130" height="50"/>
  <text class="task-text" x="1005" y="435">Транскрибировать</text>
  <text class="task-text" x="1005" y="448">речь</text>
  
  <rect class="task" x="940" y="490" width="130" height="50"/>
  <text class="task-text" x="1005" y="515">Анализировать</text>
  <text class="task-text" x="1005" y="528">эмоции</text>
  
  <rect class="task" x="940" y="570" width="130" height="50"/>
  <text class="task-text" x="1005" y="595">Определить</text>
  <text class="task-text" x="1005" y="608">микровыражения</text>
  
  <g transform="translate(1150, 510) rotate(45)">
    <rect class="gateway" x="-25" y="-25" width="50" height="50"/>
    <line x1="-10" y1="0" x2="10" y2="0" stroke="#000" stroke-width="2"/>
    <line x1="0" y1="-10" x2="0" y2="10" stroke="#000" stroke-width="2"/>
  </g>
  
  <rect class="task" x="1200" y="540" width="120" height="60"/>
  <text class="task-text" x="1260" y="565">Собрать данные</text>
  <text class="task-text" x="1260" y="580">и отправить</text>
  
  <circle class="event-end" cx="1260" cy="730" r="18"/>
  <circle class="event-end" cx="1260" cy="730" r="14" fill="#FFF"/>
  <text class="task-text" x="1260" y="760" style="font-size: 10px;">Конец</text>
  
  <!-- Потоки AI-системы -->
  <line class="sequence-flow" x1="138" y1="570" x2="180" y2="570"/>
  <line class="sequence-flow" x1="300" y1="570" x2="340" y2="570"/>
  <line class="sequence-flow" x1="460" y1="570" x2="500" y2="570"/>
  <line class="sequence-flow" x1="620" y1="570" x2="620" y2="680" stroke-dasharray="5,5"/>
  <line class="sequence-flow" x1="620" y1="680" x2="680" y2="680"/>
  <line class="sequence-flow" x1="800" y1="680" x2="858" y2="680"/>
  
  <!-- Параллельные потоки к анализу -->
  <line class="sequence-flow" x1="902" y1="680" x2="940" y2="680"/>
  <line class="sequence-flow" x1="902" y1="680" x2="920" y2="435"/>
  <line class="sequence-flow" x1="920" y1="435" x2="940" y2="435"/>
  <line class="sequence-flow" x1="902" y1="680" x2="920" y2="515"/>
  <line class="sequence-flow" x1="920" y1="515" x2="940" y2="515"/>
  <line class="sequence-flow" x1="902" y1="680" x2="920" y2="595"/>
  <line class="sequence-flow" x1="920" y1="595" x2="940" y2="595"/>
  
  <!-- Сбор результатов анализа -->
  <line class="sequence-flow" x1="1070" y1="435" x2="1128" y2="488"/>
  <line class="sequence-flow" x1="1070" y1="515" x2="1128" y2="510"/>
  <line class="sequence-flow" x1="1070" y1="595" x2="1128" y2="532"/>
  
  <line class="sequence-flow" x1="1172" y1="510" x2="1200" y2="570"/>
  <line class="sequence-flow" x1="1260" y1="600" x2="1260" y2="712"/>
  
  <!-- Пул 3: HR-система -->
  <rect class="pool" x="50" y="800" width="1300" height="240"/>
  <text class="pool-label" x="60" y="825" transform="rotate(-90 60 825)">HR-система</text>
  
  <!-- События и задачи HR-системы -->
  <circle class="event-start" cx="120" cy="920" r="18"/>
  <text class="task-text" x="120" y="965" style="font-size: 10px;">Начало</text>
  
  <rect class="task" x="180" y="890" width="120" height="60"/>
  <text class="task-text" x="240" y="915">Создать</text>
  <text class="task-text" x="240" y="930">вакансию</text>
  
  <rect class="task" x="340" y="890" width="120" height="60"/>
  <text class="task-text" x="400" y="915">Настроить</text>
  <text class="task-text" x="400" y="930">параметры</text>
  
  <rect class="task" x="500" y="890" width="120" height="60"/>
  <text class="task-text" x="560" y="915">Выбрать</text>
  <text class="task-text" x="560" y="930">кандидатов</text>
  
  <!-- Промежуточное событие (получение сообщения) -->
  <circle cx="720" cy="920" r="18" fill="#FFF" stroke="#000" stroke-width="1"/>
  <circle cx="720" cy="920" r="14" fill="#FFF" stroke="#000" stroke-width="1"/>
  <text x="710" y="925" style="font-size: 20px;">✉</text>
  <text class="task-text" x="720" y="965" style="font-size: 10px;">Уведомление</text>
  
  <rect class="task" x="780" y="890" width="120" height="60"/>
  <text class="task-text" x="840" y="915">Проверить</text>
  <text class="task-text" x="840" y="930">статус</text>
  
  <rect class="task" x="940" y="890" width="120" height="60"/>
  <text class="task-text" x="1000" y="915">Отследить</text>
  <text class="task-text" x="1000" y="930">метрики</text>
  
  <circle class="event-end" cx="1120" cy="920" r="18"/>
  <circle class="event-end" cx="1120" cy="920" r="14" fill="#FFF"/>
  <text class="task-text" x="1120" y="965" style="font-size: 10px;">Конец</text>
  
  <!-- Потоки HR-системы -->
  <line class="sequence-flow" x1="138" y1="920" x2="180" y2="920"/>
  <line class="sequence-flow" x1="300" y1="920" x2="340" y2="920"/>
  <line class="sequence-flow" x1="460" y1="920" x2="500" y2="920"/>
  <line class="sequence-flow" x1="620" y1="920" x2="702" y2="920"/>
  <line class="sequence-flow" x1="738" y1="920" x2="780" y2="920"/>
  <line class="sequence-flow" x1="900" y1="920" x2="940" y2="920"/>
  <line class="sequence-flow" x1="1060" y1="920" x2="1102" y2="920"/>
  
  <!-- Потоки сообщений между пулами -->
  <line class="message-flow" x1="240" y1="540" x2="240" y2="230"/>
  <text x="245" y="390" style="font-size: 10px; fill: #666;">Приглашение</text>
  
  <line class="message-flow" x1="560" y1="540" x2="560" y2="230"/>
  <text x="565" y="390" style="font-size: 10px; fill: #666;">Форма согласия</text>
  
  <line class="message-flow" x1="810" y1="230" x2="810" y2="540"/>
  <text x="815" y="390" style="font-size: 10px; fill: #666;">ЭЦП</text>
  
  <line class="message-flow" x1="1260" y1="730" x2="720" y2="902"/>
  <text x="990" y="820" style="font-size: 10px; fill: #666;">Уведомление о завершении</text>
  
  <!-- Легенда -->
  <g transform="translate(50, 1070)">
    <text style="font-family: Arial; font-size: 12px; font-weight: bold;">Легенда BPMN:</text>
    <circle cx="20" cy="30" r="10" fill="#FFF" stroke="#000" stroke-width="1"/>
    <text x="40" y="35" style="font-family: Arial; font-size: 10px;">Событие начала</text>
    
    <circle cx="170" cy="30" r="10" fill="#000" stroke="#000" stroke-width="3"/>
    <circle cx="170" cy="30" r="7" fill="#FFF"/>
    <text x="190" y="35" style="font-family: Arial; font-size: 10px;">Событие конца</text>
    
    <rect x="310" y="20" width="60" height="20" rx="5" ry="5" fill="#FFF" stroke="#000" stroke-width="1"/>
    <text x="380" y="35" style="font-family: Arial; font-size: 10px;">Задача</text>
    
    <g transform="translate(480, 30) rotate(45)">
      <rect x="-10" y="-10" width="20" height="20" fill="#FFFFCC" stroke="#000" stroke-width="1"/>
    </g>
    <text x="500" y="35" style="font-family: Arial; font-size: 10px;">Шлюз (Gateway)</text>
    
    <line x1="620" y1="30" x2="680" y2="30" stroke="#000" stroke-width="1.5" marker-end="url(#arrowhead)"/>
    <text x="690" y="35" style="font-family: Arial; font-size: 10px;">Поток последовательности</text>
    
    <line x1="870" y1="30" x2="930" y2="30" stroke="#000" stroke-width="1.5" stroke-dasharray="5,5" marker-end="url(#arrowhead)"/>
    <text x="940" y="35" style="font-family: Arial; font-size: 10px;">Поток сообщений</text>
  </g>
  
</svg>